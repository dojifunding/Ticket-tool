<%- include('../partials/head') %>

<div class="page-header">
  <div>
    <a href="/tickets" class="back-link">â† Tickets</a>
    <h1 class="page-title">Nouveau ticket</h1>
  </div>
</div>

<div class="form-container">
  <form method="POST" action="/tickets/new" class="form-card">
    <div class="form-group">
      <label for="subject">Sujet *</label>
      <input type="text" id="subject" name="subject" required placeholder="Ex: Impossible de se connecter au compte">
    </div>

    <div class="form-group">
      <label for="description">Description dÃ©taillÃ©e *</label>
      <textarea id="description" name="description" rows="5" required
        placeholder="DÃ©crivez le problÃ¨me en dÃ©tail : ce que l'utilisateur a fait, ce qu'il s'est passÃ©, le message d'erreur Ã©ventuel..."></textarea>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="client_name">Nom du client</label>
        <input type="text" id="client_name" name="client_name" placeholder="Jean Dupont">
      </div>
      <div class="form-group">
        <label for="client_email">Email du client</label>
        <input type="email" id="client_email" name="client_email" placeholder="jean@example.com">
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="priority">PrioritÃ©</label>
        <select id="priority" name="priority">
          <option value="low">ğŸŸ¢ Basse</option>
          <option value="medium" selected>ğŸŸ¡ Moyenne</option>
          <option value="high">ğŸŸ  Haute</option>
          <option value="urgent">ğŸ”´ Urgent</option>
        </select>
      </div>
      <div class="form-group">
        <label for="category">CatÃ©gorie</label>
        <select id="category" name="category">
          <option value="general">GÃ©nÃ©ral</option>
          <option value="bug">Bug</option>
          <option value="question">Question</option>
          <option value="feature_request">Demande de fonctionnalitÃ©</option>
          <option value="account">Compte</option>
          <option value="billing">Facturation</option>
          <option value="other">Autre</option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <label for="assigned_to">Assigner Ã </label>
      <select id="assigned_to" name="assigned_to">
        <option value="">Non assignÃ©</option>
        <% agents.forEach(a => { %>
          <option value="<%= a.id %>"><%= a.full_name %></option>
        <% }) %>
      </select>
    </div>

    <div class="form-actions">
      <a href="/tickets" class="btn btn-ghost">Annuler</a>
      <button type="submit" class="btn btn-primary">CrÃ©er le ticket</button>
    </div>
  </form>
</div>

<%- include('../partials/foot') %>
